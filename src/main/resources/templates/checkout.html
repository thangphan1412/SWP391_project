<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link href="images/favicon.png" rel="shortcut icon">
    <title>Ludus - Electronics, Apparel, Computers, Books, DVDs & more</title>

    <!--====== Google Font ======-->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,700,800" rel="stylesheet">

    <!--====== Vendor Css ======-->
    <link rel="stylesheet" href="css/vendor.css">

    <!--====== Utility-Spacing ======-->
    <link rel="stylesheet" href="css/utility.css">

    <!--====== App ======-->
    <link rel="stylesheet" href="css/app.css">
</head>
<body class="config">
<div class="preloader is-active">
    <div class="preloader__wrap">
        <img class="preloader__img" src="images/preloader.png" alt="">
    </div>
</div>

<!--====== Main App ======-->
<div id="app">

    <!--====== Main Header ======-->
    <div th:insert="~{partials/navbar :: navbar}"></div>
    <!--====== End - Main Header ======-->
    <div class="section__text-wrap" th:if="${errorMessage != null}" >

            <span style="color:red;" th:text="${errorMessage}"></span>

    </div>
    <!--====== App Content ======-->
    <div class="app-content">
        <!--====== Section 1 ======-->
        <div class="u-s-p-y-60">
            <!--====== Section Content ======-->
            <div class="section__content">
                <div class="container">
                    <div class="breadcrumb">
                        <div class="breadcrumb__wrap">
                            <ul class="breadcrumb__list">
                                <li class="has-separator">
                                    <a th:href="@{/}">Home</a>
                                </li>
                                <li class="is-marked">
                                    <a th:href="@{/checkout}">Checkout</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--====== End - Section 1 ======-->

        <!--====== Section 2 ======-->
        <div class="u-s-p-b-60">
            <!--====== Section Content ======-->
            <div class="section__content">
                <div class="container">
                    <div class="row">
                        <div class="col-lg-12">
                            <div id="checkout-msg-group">
                                <div class="msg">
                                    <span class="msg__text">Have a coupon?
                                        <a class="gl-link" href="#have-coupon" data-toggle="collapse">Click Here to enter your code</a>
                                    </span>
                                    <div class="collapse" id="have-coupon" data-parent="#checkout-msg-group">
                                        <div class="c-f u-s-m-b-16">
                                            <span class="gl-text u-s-m-b-16">Enter your coupon code if you have one.</span>
                                            <form class="c-f__form">
                                                <div class="u-s-m-b-16">
                                                    <div class="u-s-m-b-15">
                                                        <label for="coupon"></label>
                                                        <input class="input-text input-text--primary-style" type="text"
                                                               id="coupon" placeholder="Coupon Code">
                                                    </div>
                                                    <div class="u-s-m-b-15">
                                                        <button class="btn btn--e-transparent-brand-b-2" type="submit">
                                                            APPLY
                                                        </button>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--====== End - Section 2 ======-->

        <!--====== Section 3 ======-->

        <div class="u-s-p-b-60">
            <!--====== Section Content ======-->

            <div class="section__content">
                <div class="container">
                    <div class="checkout-f">
                        <form class="checkout-f__delivery" action="/placeOrder" method="POST">
                            <div class="row">
                                <div class="col-lg-6">
                                    <h1 class="checkout-f__h1">DELIVERY INFORMATION</h1>
                                    <div class="u-s-m-b-30">
                                        <div class="u-s-m-b-15">
                                            <!--====== Check Box ======-->
                                            <div class="check-box">
                                                <input type="checkbox" id="get-address">
                                                <div class="check-box__state check-box__state--primary">
                                                    <label class="check-box__label" for="get-address">Use default
                                                        shipping and billing address from account</label>
                                                </div>
                                            </div>
                                            <!--====== End - Check Box ======-->
                                        </div>
                                        <!--====== First Name, Last Name ======-->
                                        <div class="gl-inline">
                                            <div class="u-s-m-b-15">
                                                <label class="gl-label" for="billing-fname">FULL NAME *</label>
                                                <input disabled class="input-text input-text--primary-style" type="text"
                                                       id="billing-fname"
                                                       th:value="${customer.getCustomer().getFullname()}"
                                                       name="fullName" data-bill="">
                                            </div>

                                        </div>
                                        <!--====== End - First Name, Last Name ======-->

                                        <!--====== E-MAIL ======-->
                                        <div class="u-s-m-b-15">
                                            <label class="gl-label" for="billing-email">E-MAIL *</label>
                                            <input disabled class="input-text input-text--primary-style" type="text"
                                                   th:value="${customer.email}" id="billing-email" name="email"
                                                   data-bill="">
                                        </div>
                                        <!--====== End - E-MAIL ======-->

                                        <!--====== PHONE ======-->
                                        <div class="u-s-m-b-15">
                                            <label class="gl-label" for="billing-phone">PHONE *</label>
                                            <input required class="input-text input-text--primary-style" type="text"
                                                   id="billing-phone" th:value="${customer.getCustomer().getPhone()}"
                                                   name="phone" data-bill="">
                                        </div>
                                        <!--====== End - PHONE ======-->

                                        <!--====== Street Address ======-->
                                        <div class="u-s-m-b-15">
                                            <label class="gl-label" for="billing-street">ADDRESS *</label>
                                            <input required class="input-text input-text--primary-style" type="text"
                                                   id="billing-street" name="address" placeholder="Enter address"
                                                   data-bill="">
                                        </div>
                                        <div id="qr-code-container" style="display: none;">
                                            <img id="qr-code-img" width="100%" src="" alt="QR Code">
                                        </div>
                                    </div>

                                </div>
                                <div class="col-lg-6">
                                    <h1 class="checkout-f__h1">ORDER SUMMARY</h1>
                                    <!--====== Order Summary ======-->
                                    <div class="o-summary">
                                        <div class="o-summary__section u-s-m-b-30">
                                            <div class="o-summary__item-wrap gl-scroll">
                                                <div class="o-card" th:each="cartItem : ${ListCart}">
                                                    <div class="o-card__flex">
                                                        <div class="o-card__img-wrap">
                                                            <img class="u-img-fluid"
                                                                 th:src="@{'/product_img/' + ${cartItem.productType.product.productImage}}"
                                                                 alt="">
                                                        </div>
                                                        <div class="o-card__info-wrap">
                                                        <span class="table-p__name">
                                                            <a th:href="@{/ProductDetail/{id}(id = ${cartItem.productType.product.productId})}"
                                                               th:text="${cartItem.productType.product.productName}"></a>
                                                        </span>
                                                            <span class="o-card__quantity"
                                                                  th:text="'Quantity x ' + ${cartItem.quantity}">Quantity x 1</span>
                                                            <span class="o-card__price"
                                                                  th:text="'$' + ${cartItem.productType.product_type_price * cartItem.quantity}">$150.00</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="o-summary__section u-s-m-b-30">
                                            <div class="o-summary__box">
                                                <table class="o-summary__table">
                                                    <tbody>
                                                    <tr>
                                                        <td>SHIPPING</td>
                                                        <td>$0.00</td>
                                                    </tr>
                                                    <tr>
                                                        <td>TAX</td>
                                                        <td>$0.00</td>
                                                    </tr>
                                                    <tr>
                                                        <td>SUBTOTAL</td>
                                                        <td>$0.00</td>
                                                    </tr>
                                                    <tr>
                                                        <td>GRAND TOTAL</td>
                                                        <td id="grand-total" th:text="${total}">$379.00</td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>

                                        <div class="o-summary__section u-s-m-b-30">
                                            <div class="o-summary__box">
                                                <h1 class="checkout-f__h1">PAYMENT INFORMATION</h1>

                                                    <div class="u-s-m-b-10">
                                                        <div class="radio-box">
                                                            <input type="radio" id="cash-on-delivery" name="payment"
                                                                   value="Cash on Delivery">
                                                            <div class="radio-box__state radio-box__state--primary">
                                                                <label class="radio-box__label" for="cash-on-delivery">Cash
                                                                    on Delivery</label>
                                                            </div>
                                                        </div>
                                                        <span class="gl-text u-s-m-t-6">Pay Upon Cash on delivery. (This service is only available for some countries)</span>
                                                    </div>
                                                    <div class="u-s-m-b-10">
                                                        <div class="radio-box">
                                                            <input type="radio" id="direct-bank-transfer" name="payment"
                                                                   value="Direct Bank Transfer">
                                                            <div class="radio-box__state radio-box__state--primary">
                                                                <label class="radio-box__label"
                                                                       for="direct-bank-transfer">Direct Bank
                                                                    Transfer</label>
                                                            </div>
                                                        </div>
                                                        <span class="gl-text u-s-m-t-6">Make your payment directly into our bank account. Please use your Order ID as the payment reference. Your order will not be shipped until the funds have cleared in our account.</span>
                                                        <button style="display: none" class="btn btn--e-brand-b-2"
                                                                type="button" id="bank-transfer-btn">Bank Transfer Info
                                                        </button>
                                                    </div>
                                                    <div class="u-s-m-b-10">
                                                        <div class="radio-box">
                                                            <input type="radio" id="pay-with-check" name="payment"
                                                                   value="Pay with Check">
                                                            <div class="radio-box__state radio-box__state--primary">
                                                                <label class="radio-box__label" for="pay-with-check">Pay
                                                                    With Check</label>
                                                            </div>
                                                        </div>
                                                        <span class="gl-text u-s-m-t-6">Please send a check to Store Name, Store Street, Store Town, Store State / County, Store Postcode.</span>
                                                    </div>
                                                    <div class="u-s-m-b-10">
                                                        <div class="radio-box">
                                                            <input type="radio" id="pay-with-card" name="payment"
                                                                   value="Credit / Debit Card">
                                                            <div class="radio-box__state radio-box__state--primary">
                                                                <label class="radio-box__label" for="pay-with-card">Pay
                                                                    With Credit / Debit Card</label>
                                                            </div>
                                                        </div>
                                                        <span class="gl-text u-s-m-t-6">International Credit Cards must be eligible for use within the United States.</span>
                                                    </div>
                                                    <div class="u-s-m-b-10">
                                                        <div class="radio-box">
                                                            <input type="radio" id="pay-pal" name="payment"
                                                                   value="PayPal">
                                                            <div class="radio-box__state radio-box__state--primary">
                                                                <label class="radio-box__label" for="pay-pal">Pay
                                                                    Pal</label>
                                                            </div>
                                                        </div>
                                                        <span class="gl-text u-s-m-t-6">When you click "Place Order" below we'll take you to Paypal's site to set up your billing information.</span>
                                                    </div>
                                                    <div class="u-s-m-b-15">
                                                        <div class="check-box">
                                                            <input type="checkbox" id="term-and-condition">
                                                            <div class="check-box__state check-box__state--primary">
                                                                <label class="check-box__label"
                                                                       for="term-and-condition">I consent to the</label>
                                                            </div>
                                                        </div>
                                                        <a class="gl-link">Terms of Service.</a>
                                                    </div>
                                                    <div>
                                                        <button class="btn btn--e-brand-b-2" type="submit">PLACE ORDER
                                                        </button>
                                                    </div>

                                            </div>
                                        </div>
                                    </div>
                                    <!--====== End - Order Summary ======-->
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <!--====== End - Section 3 ======-->
    </div>
    <!--====== End - App Content ======-->

    <!--====== Main Footer ======-->
    <footer>
        <div class="outer-footer">
            <div class="container">
                <div class="row">
                    <div class="col-lg-4 col-md-6">
                        <div class="outer-footer__content u-s-m-b-40">
                            <span class="outer-footer__content-title">Contact Us</span>
                            <div class="outer-footer__text-wrap"><i class="fas fa-home"></i>
                                <span>4247 Ashford Drive Virginia VA-20006 USA</span>
                            </div>
                            <div class="outer-footer__text-wrap"><i class="fas fa-phone-volume"></i>
                                <span>(+0) 900 901 904</span>
                            </div>
                            <div class="outer-footer__text-wrap"><i class="far fa-envelope"></i>
                                <span>contact@domain.com</span>
                            </div>
                            <div class="outer-footer__social">
                                <ul>
                                    <li>
                                        <a class="s-fb--color-hover" href="#"><i class="fab fa-facebook-f"></i></a>
                                    </li>
                                    <li>
                                        <a class="s-tw--color-hover" href="#"><i class="fab fa-twitter"></i></a>
                                    </li>
                                    <li>
                                        <a class="s-youtube--color-hover" href="#"><i class="fab fa-youtube"></i></a>
                                    </li>
                                    <li>
                                        <a class="s-insta--color-hover" href="#"><i class="fab fa-instagram"></i></a>
                                    </li>
                                    <li>
                                        <a class="s-gplus--color-hover" href="#"><i
                                                class="fab fa-google-plus-g"></i></a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-6">
                        <div class="row">
                            <div class="col-lg-6 col-md-6">
                                <div class="outer-footer__content u-s-m-b-40">
                                    <span class="outer-footer__content-title">Information</span>
                                    <div class="outer-footer__list-wrap">
                                        <ul>
                                            <li>
                                                <a href="cart.html">Cart</a>
                                            </li>
                                            <li>
                                                <a href="dashboard.html">Account</a>
                                            </li>
                                            <li>
                                                <a href="shop-side-version-2.html">Manufacturer</a>
                                            </li>
                                            <li>
                                                <a href="dash-payment-option.html">Finance</a>
                                            </li>
                                            <li>
                                                <a href="shop-side-version-2.html">Shop</a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6 col-md-6">
                                <div class="outer-footer__content u-s-m-b-40">
                                    <div class="outer-footer__list-wrap">
                                        <span class="outer-footer__content-title">Our Company</span>
                                        <ul>
                                            <li>
                                                <a href="about.html">About us</a>
                                            </li>
                                            <li>
                                                <a href="contact.html">Contact Us</a>
                                            </li>
                                            <li>
                                                <a href="index.html">Sitemap</a>
                                            </li>
                                            <li>
                                                <a href="dash-my-order.html">Delivery</a>
                                            </li>
                                            <li>
                                                <a href="shop-side-version-2.html">Store</a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-12">
                        <div class="outer-footer__content">
                            <span class="outer-footer__content-title">Join our Newsletter</span>
                            <form class="newsletter">
                                <div class="u-s-m-b-15">
                                    <div class="radio-box newsletter__radio">
                                        <input type="radio" id="male" name="gender">
                                        <div class="radio-box__state radio-box__state--primary">
                                            <label class="radio-box__label" for="male">Male</label>
                                        </div>
                                    </div>
                                    <div class="radio-box newsletter__radio">
                                        <input type="radio" id="female" name="gender">
                                        <div class="radio-box__state radio-box__state--primary">
                                            <label class="radio-box__label" for="female">Female</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="newsletter__group">
                                    <label for="newsletter"></label>
                                    <input class="input-text input-text--only-white" type="text" id="newsletter"
                                           placeholder="Enter your Email">
                                    <button class="btn btn--e-brand newsletter__btn" type="submit">SUBSCRIBE</button>
                                </div>
                                <span class="newsletter__text">Subscribe to the mailing list to receive updates on promotions, new arrivals, discount and coupons.</span>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="lower-footer">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="lower-footer__content">
                            <div class="lower-footer__copyright">
                                <span>Copyright © 2018</span>
                                <a href="index.html">Reshop</a>
                                <span>All Right Reserved</span>
                            </div>
                            <div class="lower-footer__payment">
                                <ul>
                                    <li><i class="fab fa-cc-stripe"></i></li>
                                    <li><i class="fab fa-cc-paypal"></i></li>
                                    <li><i class="fab fa-cc-mastercard"></i></li>
                                    <li><i class="fab fa-cc-visa"></i></li>
                                    <li><i class="fab fa-cc-discover"></i></li>
                                    <li><i class="fab fa-cc-amex"></i></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!--====== Modal Section ======-->
</div>
<!--====== End - Main App ======-->

<!--====== Vendor Js ======-->
<script src="js/vendor.js"></script>

<!--====== jQuery Shopnav plugin ======-->
<script src="js/jquery.shopnav.js"></script>

<!--====== App ======-->
<script src="js/app.js"></script>

<!-- Payment Method Selection Script -->
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const paymentRadios = document.querySelectorAll('input[name="payment"]');
        const bankTransferButton = document.getElementById('bank-transfer-btn');

        paymentRadios.forEach(radio => {
            radio.addEventListener('change', function () {
                if (radio.id === 'direct-bank-transfer' && radio.checked) {
                    bankTransferButton.style.display = 'inline-block';
                } else {
                    bankTransferButton.style.display = 'none';
                }
            });
        });
    });

    const checkoutBtn = document.getElementById('bank-transfer-btn');
    const qrCodeContainer = document.getElementById('qr-code-container');
    const qrCodeImg = document.getElementById('qr-code-img');

    checkoutBtn.addEventListener('click', function () {
        checkoutBtn.disabled = true;
        checkoutBtn.innerHTML = '<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Processing...';

        // Fetch the latest grand total
        const totalPriceElement = document.getElementById('grand-total');
        const totalPrice = parseFloat(totalPriceElement.textContent.replace('$', ''));

        // Update the QR code URL with the latest total price
        fetch(`https://vietqr.co/api/generate/tpb/03014962001/VIETQR.CO/${parseInt(totalPrice)}/CellphoneDBZ%20Payment?isMask=0`)
            .then(response => response.blob())
            .then(blob => {
                const qrImageUrl = URL.createObjectURL(blob);
                qrCodeImg.src = qrImageUrl;
                qrCodeContainer.style.display = 'block';
                checkoutBtn.innerHTML = 'Get payment information successfully';
                checkoutBtn.disabled = true;
            })
            .catch(error => {
                console.error('Error fetching QR code:', error);
                checkoutBtn.innerHTML = 'Proceed to Checkout';
                checkoutBtn.disabled = false;
            });
    });
</script>
<!--====== Noscript ======-->
<noscript>
    <div class="app-setting">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="app-setting__wrap">
                        <h1 class="app-setting__h1">JavaScript is disabled in your browser.</h1>
                        <span class="app-setting__text">Please enable JavaScript in your browser or upgrade to a JavaScript-capable browser.</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</noscript>
</body>
</html>
