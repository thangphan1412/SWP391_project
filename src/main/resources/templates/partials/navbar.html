<html xmlns:th="http://www.thymeleaf.org">
<header th:fragment="navbar" class="header--style-1">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

    <!--====== Nav 1 ======-->
    <nav class="primary-nav primary-nav-wrapper--border">
        <div class="container">

            <!--====== Primary Nav ======-->
            <div class="primary-nav">

                <!--====== Main Logo ======-->

                <a class="main-logo" href="#">

                    <img src="#" alt=""></a>
                <!--====== End - Main Logo ======-->


                <!--====== Search Form ======-->

                <form id="name-filter-form" class="shop-w__form-p" action="/ListProduct"
                      method="get">
                    <div  class="shop-w__form-p">
                        <div style="position: relative" id="search-container">
                            <label for="name"></label>

                            <input style="width: 170%" class="input-text input-text--border-radius input-text--style-1"
                                   type="text" id="name" th:value="${param.name}"
                                   placeholder="Enter name to find..." name="name" >
                            <input
                                    type="hidden"
                                    name="categoryId"
                                    th:value="${param.categoryId}"
                            >  <input
                                type="hidden"
                                name="colorId"
                                th:value="${param.colorId}"
                        ><input
                                type="hidden"
                                name="memory"
                                th:value="${param.memory}"
                        ><input
                                type="hidden"
                                name="ram"
                                th:value="${param.ram}"
                        ><input
                                type="hidden"
                                name="minSize"
                                th:value="${param.minSize}"
                        ><input
                                type="hidden"
                                name="maxSize"
                                th:value="${param.maxSize}"
                        >
                        </div>
                    </div>
                    <ul id="recent-searches" style="display: none; list-style: none; position: absolute; background: white; border: 1px solid #ccc; width: 27%; border-radius: 15px;  z-index: 1000; padding: 0; margin: 0;"></ul>

                </form>

                <!--====== End - Search Form ======-->


                <!--====== Dropdown Main plugin ======-->
                <div class="menu-init" id="navigation">

                    <button class="btn btn--icon toggle-button toggle-button--secondary fas fa-cogs" type="button"></button>

                    <!--====== Menu ======-->
                    <div class="ah-lg-mode">

                        <span class="ah-close">✕ Close</span>

                        <!--====== List ======-->
                        <ul class="ah-list ah-list--design1 ah-list--link-color-secondary">
                            <li class="has-dropdown" data-tooltip="tooltip" data-placement="left" title="Account">

                                <a><i class="far fa-user-circle"></i></a>

                                <!--====== Dropdown ======-->

                                <span class="js-menu-toggle"></span>

                                <ul style="width:120px">
                                    <li id="account">

                                        <a href="/UserDetail"><i class="fas fa-user-circle u-s-m-r-6"></i>

                                            <span>Account</span></a></li>

                                    <li id="dashboard">

                                        <a href="/update"><i class="fas fa-address-card u-s-m-r-6"></i>

                                            <span>Dashboard</span></a></li>

                                    <li id="register">

                                        <a href="/register"><i class="fas fa-user-plus u-s-m-r-6"></i>

                                            <span>Signup</span></a></li>
                                    <li id="login">

                                        <a href="/login"><i class="fas fa-lock u-s-m-r-6"></i>

                                            <span>Signin</span></a></li>
                                    <li id="logout">

                                        <a th:href="@{/logout}">
                                            <i class="fas fa-lock-open u-s-m-r-6"></i>
                                            <span>Sign out</span></a></li>
                                </ul>

                                <!--====== End - Dropdown ======-->
                            </li>

                            <li data-tooltip="tooltip" data-placement="left" title="Contact">

                                <a href="tel:+0900901904"><i class="fas fa-phone-volume"></i></a></li>
                            <li data-tooltip="tooltip" data-placement="left" title="Mail">

                                <a href="mailto:contact@domain.com"><i class="far fa-envelope"></i></a></li>
                        </ul>
                        <!--====== End - List ======-->
                    </div>
                    <!--====== End - Menu ======-->
                </div>
                <!--====== End - Dropdown Main plugin ======-->
            </div>
            <!--====== End - Primary Nav ======-->
        </div>
    </nav>
    <!--====== End - Nav 1 ======-->


    <!--====== Nav 2 ======-->
    <nav class="secondary-nav-wrapper">
        <div class="container">

            <!--====== Secondary Nav ======-->
            <div class="secondary-nav">
                <div class="menu-init" id="navigation1"></div>

                <!--====== Dropdown Main plugin ======-->
                <div class="menu-init" id="navigation2">

                    <button class="btn btn--icon toggle-button toggle-button--secondary fas fa-cog" type="button"></button>

                    <!--====== Menu ======-->
                    <div class="ah-lg-mode">

                        <span class="ah-close">✕ Close</span>

                        <!--====== List ======-->
                        <ul class="ah-list ah-list--design2 ah-list--link-color-secondary">

                            <li class="has-dropdown">

                                <a href="/">HOME</a>

                            <li>

                                <a href="/ListProduct">PRODUCT</a></li>

                            <li>

                                <a th:href="@{/viewCart}" id="cart">CART</a></li>

                        </ul>
                        <!--====== End - List ======-->
                    </div>
                    <!--====== End - Menu ======-->
                </div>
                <!--====== End - Dropdown Main plugin ======-->


                <!--====== Dropdown Main plugin ======-->
                <div class="menu-init" id="navigation3">

                    <button class="btn btn--icon toggle-button toggle-button--secondary fas fa-shopping-bag toggle-button-shop" type="button"></button>

                    <span class="total-item-round">2</span>

                    <!--====== Menu ======-->
                    <div class="ah-lg-mode">

                        <span class="ah-close">✕ Close</span>

                        <!--====== List ======-->
                        <ul class="ah-list ah-list--design1 ah-list--link-color-secondary">


                            <li class="has-dropdown">

                                <a class="mini-cart-shop-link" th:href="@{/viewCart}" id="cart2"><i class="fas fa-shopping-bag"></i>
                                </a>

                                <!--====== Dropdown ======-->

                                <span class="js-menu-toggle"></span>
                                <!--====== End - Dropdown ======-->
                            </li>
                        </ul>
                        <!--====== End - List ======-->
                    </div>
                    <!--====== End - Menu ======-->
                </div>
                <!--====== End - Dropdown Main plugin ======-->
            </div>
            <!--====== End - Secondary Nav ======-->
        </div>
    </nav>
    <script th:inline="javascript">
        $(document).ready(function () {
            if (readCookie('1234abc')) { // admin
                console.log(readCookie('1234abc'));
                $('#account').hide();
                $("#login").hide();//hide account
                $("#register").hide();
                $("#cart").hide();
                $("#cart2").hide();

            }
            else if (readCookie('4567abc')) { // customer
                console.log(readCookie('4567abc'));
                $('#dashboard').hide();
                $("#login").hide()//hide account
                $("#register").hide()
            }
            else if (readCookie('89abc')) { // employee
                console.log(readCookie('89abc'));
                $('#account').hide();
                $("#login").hide()//hide account
                $("#register").hide()
                $("#cart").hide();
                $("#cart2").hide();
            }

            else{
                $('#dashboard').hide();
                $('#account').hide();
                $('#logout').hide();
            }
        })
        function readCookie(name) {
            var nameEQ = name + "=";
            var ca = document.cookie.split(';');
            console.log(ca);
            for (var i = 0; i < ca.length; i++) {
                var c = ca[i];
                while (c.charAt(0) === ' ') c = c.substring(1, c.length);
                if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
        }

        // Function to read recent searches from local storage
        function getRecentSearches() {
            let searches = localStorage.getItem('recentSearches');
            return searches ? JSON.parse(searches) : [];
        }

        // Function to save a new search term
        function saveSearch(term) {
            let searches = getRecentSearches();
            if (!searches.includes(term)) {
                if (searches.length >= 5) {
                    searches.pop(); // Remove the oldest search if limit is reached
                }
                searches.unshift(term); // Add the new search term at the beginning
                localStorage.setItem('recentSearches', JSON.stringify(searches));
            }
        }

        // Show recent searches when the search input is focused
        $('#name').on('focus', function() {
            showRecentSearches();
        });

        // Function to display recent searches
        function showRecentSearches() {
            let searches = getRecentSearches();
            let searchList = $('#recent-searches');
            searchList.empty().hide();
            if (searches.length > 0) {
                searches.forEach(search => {
                    searchList.append(`<li style="padding: 5px 10px; cursor: pointer;" onclick="setSearchTerm('${search}')">${search}</li>`);
                });
                searchList.show();
            }
        }

        // Function to set the clicked search term to the input
        window.setSearchTerm = function(term) {
            $('#name').val(term).focus();
            $('#recent-searches').hide();
        };

        // Save the search term when the form is submitted
        $('#name-filter-form').on('submit', function() {
            let searchTerm = $('#name').val().trim();
            if (searchTerm) {
                saveSearch(searchTerm);
            }
        });

        // Hide the recent searches dropdown when the mouse leaves the container
        $('#search-container').on('mouseleave', function() {
            $('#recent-searches').hide();
        });

        // Prevent the dropdown from hiding when the mouse enters it
        $('#recent-searches').on('mouseenter', function() {
            $('#recent-searches').show();
        });


    </script>
    <!--====== End - Nav 2 ======-->
</header>
</html>
